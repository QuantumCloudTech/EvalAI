import{ab as J,ac as D,V as G,X,G as f,bF as Y,bG as Z,bv as j,bH as Q,b2 as ee,bp as se,B as W,o as b,c as y,$ as v,a0 as t,a as o,aa as P,a5 as q,a7 as A,a9 as te,t as p,Y as K,Z as _,a8 as ae,an as oe,af as le,_ as re,b7 as ne,b8 as ie,u as de,al as T,ak as ue,r as pe,as as d,F as ce,bI as fe,b9 as R,bJ as me,ba as _e,bK as he,bb as we,a6 as I,bL as ge,ar as be,p as ve,d as ye,bM as ke}from"./index-f743b3f6.js";import{E as $e}from"./el-dialog-d60669c6.js";import{E as Ve,n as Pe}from"./el-form-item-f656376e.js";const Se=J({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:h=>h>=0&&h<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:D(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:D([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:D(Function),default:h=>`${h}%`}}),Ie=["aria-valuenow"],Ce={viewBox:"0 0 100 100"},Be=["d","stroke","stroke-linecap","stroke-width"],Ee=["d","stroke","opacity","stroke-linecap","stroke-width"],Me={key:0},Ne=G({name:"ElProgress"}),Ue=G({...Ne,props:Se,setup(h){const a=h,N={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},n=X("progress"),C=f(()=>({width:`${a.percentage}%`,animationDuration:`${a.duration}s`,backgroundColor:w(a.percentage)})),S=f(()=>(a.strokeWidth/a.width*100).toFixed(1)),l=f(()=>["circle","dashboard"].includes(a.type)?Number.parseInt(`${50-Number.parseFloat(S.value)/2}`,10):0),B=f(()=>{const e=l.value,g=a.type==="dashboard";return`
          M 50 50
          m 0 ${g?"":"-"}${e}
          a ${e} ${e} 0 1 1 0 ${g?"-":""}${e*2}
          a ${e} ${e} 0 1 1 0 ${g?"":"-"}${e*2}
          `}),$=f(()=>2*Math.PI*l.value),V=f(()=>a.type==="dashboard"?.75:1),i=f(()=>`${-1*$.value*(1-V.value)/2}px`),U=f(()=>({strokeDasharray:`${$.value*V.value}px, ${$.value}px`,strokeDashoffset:i.value})),E=f(()=>({strokeDasharray:`${$.value*V.value*(a.percentage/100)}px, ${$.value}px`,strokeDashoffset:i.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),M=f(()=>{let e;return a.color?e=w(a.percentage):e=N[a.status]||N.default,e}),F=f(()=>a.status==="warning"?Y:a.type==="line"?a.status==="success"?Z:j:a.status==="success"?Q:ee),x=f(()=>a.type==="line"?12+a.strokeWidth*.4:a.width*.111111+2),s=f(()=>a.format(a.percentage));function r(e){const g=100/e.length;return e.map((m,k)=>W(m)?{color:m,percentage:(k+1)*g}:m).sort((m,k)=>m.percentage-k.percentage)}const w=e=>{var g;const{color:c}=a;if(se(c))return c(e);if(W(c))return c;{const m=r(c);for(const k of m)if(k.percentage>e)return k.color;return(g=m[m.length-1])==null?void 0:g.color}};return(e,g)=>(b(),y("div",{class:v([t(n).b(),t(n).m(e.type),t(n).is(e.status),{[t(n).m("without-text")]:!e.showText,[t(n).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[e.type==="line"?(b(),y("div",{key:0,class:v(t(n).b("bar"))},[o("div",{class:v(t(n).be("bar","outer")),style:P({height:`${e.strokeWidth}px`})},[o("div",{class:v([t(n).be("bar","inner"),{[t(n).bem("bar","inner","indeterminate")]:e.indeterminate},{[t(n).bem("bar","inner","striped")]:e.striped},{[t(n).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:P(t(C))},[(e.showText||e.$slots.default)&&e.textInside?(b(),y("div",{key:0,class:v(t(n).be("bar","innerText"))},[q(e.$slots,"default",{percentage:e.percentage},()=>[o("span",null,p(t(s)),1)])],2)):A("v-if",!0)],6)],6)],2)):(b(),y("div",{key:1,class:v(t(n).b("circle")),style:P({height:`${e.width}px`,width:`${e.width}px`})},[(b(),y("svg",Ce,[o("path",{class:v(t(n).be("circle","track")),d:t(B),stroke:`var(${t(n).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":t(S),fill:"none",style:P(t(U))},null,14,Be),o("path",{class:v(t(n).be("circle","path")),d:t(B),stroke:t(M),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":t(S),style:P(t(E))},null,14,Ee)]))],6)),(e.showText||e.$slots.default)&&!e.textInside?(b(),y("div",{key:2,class:v(t(n).e("text")),style:P({fontSize:`${t(x)}px`})},[q(e.$slots,"default",{percentage:e.percentage},()=>[e.status?(b(),K(t(oe),{key:1},{default:_(()=>[(b(),K(ae(t(F))))]),_:1})):(b(),y("span",Me,p(t(s)),1))])],6)):A("v-if",!0)],10,Ie))}});var Fe=te(Ue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const xe=le(Fe);const z=h=>(ve("data-v-41ef393b"),h=h(),ye(),h),De={class:"icon mr8","aria-hidden":"true",style:{"font-size":"12px"}},Te=z(()=>o("use",{"xlink:href":"#icon-Back"},null,-1)),ze=[Te],He={class:"main"},Le={class:"second-title"},We={class:"flex-between top"},qe={class:"flex-center"},Ae={style:{"margin-bottom":"14px"}},Ke={class:"top-right"},Re={style:{"margin-top":"12px"}},Ge={class:"content"},Oe={class:"flex-between item"},Je={class:"label"},Xe={class:"flex-between item"},Ye={class:"label"},Ze={class:"flex-between item"},je={class:"label"},Qe={class:"flex-between item"},es={class:"label"},ss={class:"flex-between item"},ts=z(()=>o("div",{class:"label"},"GITHUB",-1)),as={class:"footer"},os={class:"between"},ls=z(()=>o("div",null,null,-1)),rs={__name:"Profile",setup(h){const{t:a,locale:N}=ne(),n=ie(),C=de(),S=()=>{window.history.length>1?C.back():C.push("/")},l=T({first_name:"",last_name:"",affiliation:"",github_url:"",google_scholar_url:"",linkedin_url:""}),B=f(()=>{let s=2;return l.first_name&&(s+=1),l.last_name&&(s+=1),l.affiliation&&(s+=1),l.github_url&&(s+=1),Math.round(100*s/6)}),$=()=>{fe({first_name:l.first_name,last_name:l.last_name,affiliation:l.affiliation,github_url:l.github_url,google_scholar_url:l.google_scholar_url,linkedin_url:l.linkedin_url}).then(s=>{R.success(a("user.profileUpdatedSuccess")),V()})},V=()=>{me().then(s=>{l.first_name=s.first_name,l.last_name=s.last_name,l.affiliation=s.affiliation,l.github_url=s.github_url||"",l.google_scholar_url=s.google_scholar_url||"",l.linkedin_url=s.linkedin_url||""})};ue(()=>{V()});const i=T({visible:!1,old_password:"",new_password1:"",new_password2:""}),U=()=>{i.visible=!0},E=pe(),M=()=>{E.value.validate(s=>{s&&ke({old_password:i.old_password,new_password1:i.new_password1,new_password2:i.new_password2}).then(r=>{R.success(a("user.pwChangeSuccess")),i.visible=!1})})},F=(s,r,w)=>{r!==i.new_password1?w(new Error(a("user.confirmpwVerify1"))):w()},x=T({old_password:[{required:!0,message:a("user.oldPwVerify1"),trigger:"blur"},{pattern:/^.{8,}$/,message:a("user.oldPwVerify2"),trigger:"blur"}],new_password1:[{required:!0,message:a("user.newPwVerify1"),trigger:"blur"},{pattern:/^.{8,}$/,message:a("user.oldPwVerify2"),trigger:"blur"}],new_password2:[{validator:F,trigger:"blur"}]});return(s,r)=>{var H,L;const w=_e,e=he,g=xe,c=we,m=Ve,k=Pe,O=$e;return b(),y(ce,null,[d(w,{text:"",onClick:S},{default:_(()=>[(b(),y("svg",De,ze)),I(" "+p(s.$t("back")),1)]),_:1}),o("div",He,[o("div",Le,p(s.$t("user.profile")),1),o("div",We,[o("div",qe,[d(e,{size:64,src:t(ge),style:{margin:"0 40px"}},null,8,["src"]),o("div",null,[o("div",Ae,p((H=t(n).state.userInfo)==null?void 0:H.username),1),o("div",null,p((L=t(n).state.userInfo)==null?void 0:L.email),1)])]),o("div",Ke,[d(g,{type:"circle",percentage:B.value,width:65,"stroke-width":7,color:"#6D87F9"},null,8,["percentage"]),o("div",Re,p(s.$t("user.profileCompleted")),1)])]),o("div",Ge,[o("div",Oe,[o("div",Je,p(s.$t("user.password")),1),d(w,{plain:"",onClick:U},{default:_(()=>[I(p(s.$t("user.changePassword")),1)]),_:1})]),o("div",Xe,[o("div",Ye,p(s.$t("user.firstName")),1),d(c,{modelValue:l.first_name,"onUpdate:modelValue":r[0]||(r[0]=u=>l.first_name=u),modelModifiers:{trim:!0},placeholder:"-",maxlength:"32"},null,8,["modelValue"])]),o("div",Ze,[o("div",je,p(s.$t("user.lastName")),1),d(c,{modelValue:l.last_name,"onUpdate:modelValue":r[1]||(r[1]=u=>l.last_name=u),modelModifiers:{trim:!0},placeholder:"-",maxlength:"32"},null,8,["modelValue"])]),o("div",Qe,[o("div",es,p(s.$t("user.affilliate")),1),d(c,{modelValue:l.affiliation,"onUpdate:modelValue":r[2]||(r[2]=u=>l.affiliation=u),modelModifiers:{trim:!0},placeholder:"-",maxlength:"32"},null,8,["modelValue"])]),o("div",ss,[ts,d(c,{modelValue:l.github_url,"onUpdate:modelValue":r[3]||(r[3]=u=>l.github_url=u),modelModifiers:{trim:!0},placeholder:"-",maxlength:"32"},null,8,["modelValue"])])]),o("div",as,[d(w,{type:"primary",onClick:$},{default:_(()=>[I(p(s.$t("save")),1)]),_:1})])]),d(O,{modelValue:i.visible,"onUpdate:modelValue":r[8]||(r[8]=u=>i.visible=u),title:s.$t("user.changePassword"),width:"500",class:"oa-dialog","close-on-click-modal":!1,"close-on-press-escape":!1},{footer:_(()=>[o("div",os,[ls,o("div",null,[d(w,{onClick:r[7]||(r[7]=u=>i.visible=!1),text:"",bg:""},{default:_(()=>[I(p(s.$t("cancel")),1)]),_:1}),d(w,{type:"primary",onClick:M},{default:_(()=>[I(p(s.$t("submit")),1)]),_:1})])])]),default:_(()=>[d(k,{model:i,rules:x,ref_key:"passwordRef",ref:E,"label-position":"top","require-asterisk-position":"right"},{default:_(()=>[d(m,{label:s.$t("user.oldPassword"),prop:"old_password"},{default:_(()=>[d(c,{type:"password",modelValue:i.old_password,"onUpdate:modelValue":r[4]||(r[4]=u=>i.old_password=u),modelModifiers:{trim:!0},placeholder:s.$t("user.oldPasswordPH"),maxlength:"32","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:s.$t("user.newPassword"),prop:"new_password1"},{default:_(()=>[d(c,{type:"password",modelValue:i.new_password1,"onUpdate:modelValue":r[5]||(r[5]=u=>i.new_password1=u),modelModifiers:{trim:!0},placeholder:s.$t("user.newPasswordPH"),maxlength:"32","show-password":""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(m,{label:s.$t("user.confirmpw"),prop:"new_password2"},{default:_(()=>[d(c,{type:"password",modelValue:i.new_password2,"onUpdate:modelValue":r[6]||(r[6]=u=>i.new_password2=u),modelModifiers:{trim:!0},placeholder:s.$t("user.confirmpwPH"),maxlength:"32","show-password":"",onKeypress:be(M,["enter"])},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}},us=re(rs,[["__scopeId","data-v-41ef393b"]]);export{us as default};
