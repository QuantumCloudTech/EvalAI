import{_ as S,b8 as K,u as R,bd as C,b7 as q,r as b,al as v,o as u,c as m,F as c,a as t,t as a,as as l,Z as f,ar as y,p as B,d as M,b$ as P,c5 as H,b9 as N,bb as U}from"./index-f743b3f6.js";import{n as Z,E as z}from"./el-form-item-f656376e.js";const A=n=>(B("data-v-e5a817f0"),n=n(),M(),n),D=A(()=>t("div",{class:"logo"},[t("img",{src:P,alt:""})],-1)),L={class:"restext"},j={class:"greet"},x={class:"center"},G={style:{color:"#ffffff"},href:"/auth/signup"},J={__name:"Resetcode",setup(n){K();const $=R(),_=C(),{t:i,locale:O}=q(),g=b(0),s=v({username:"",password:""}),V=(e,o,r)=>{o!==s.password?r(new Error(i("reset.confirmpwVerify1"))):r()},k=v({password:[{required:!0,message:i("reset.passwordVerify1"),trigger:"blur"},{pattern:/^.{6,}$/,message:i("reset.passwordVerify2"),trigger:"blur"},{pattern:/^([A-Za-z\d]|[`\-=[\]\\;,./~!@#$%^&*()_+{}|:"<>?])+$/,message:"请输入英文字母、数字或英文符号",trigger:"blur"}],confirmpw:[{required:!0,message:i("reset.passwordVerify1"),trigger:"blur"},{validator:V,trigger:"blur"}]}),w=b(),p=()=>{w.value.validate(e=>{e&&E()})},E=()=>{H({new_password1:s.password,new_password2:s.confirmpw,token:_.params.token,uid:_.params.uid}).then(e=>{g.value=1,N.success(e.detail)})},F=()=>{$.push("/auth/login")};return(e,o)=>{const r=U,h=z,I=Z;return u(),m(c,null,[D,g.value===1?(u(),m(c,{key:0},[t("div",L,a(e.$t("reset.restext")),1),t("div",{class:"auth-submit-btn",onClick:F},a(e.$t("reset.login")),1)],64)):(u(),m(c,{key:1},[t("div",j,a(e.$t("greeting")),1),l(I,{ref_key:"inputForm",ref:w,model:s,rules:k,class:"auth-form","label-position":"top","validate-on-rule-change":!1,"require-asterisk-position":"right"},{default:f(()=>[l(h,{label:e.$t("reset.setpw"),prop:"password"},{default:f(()=>[l(r,{class:"input-item",type:"password",modelValue:s.password,"onUpdate:modelValue":o[0]||(o[0]=d=>s.password=d),modelModifiers:{trim:!0},placeholder:e.$t("reset.passwordPH"),onKeypress:y(p,["enter"]),maxlength:"32","show-password":""},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"]),l(h,{label:e.$t("reset.confirmpw"),prop:"confirmpw"},{default:f(()=>[l(r,{class:"input-item",type:"password",modelValue:s.confirmpw,"onUpdate:modelValue":o[1]||(o[1]=d=>s.confirmpw=d),modelModifiers:{trim:!0},placeholder:e.$t("reset.confirmpwPH"),onKeypress:y(p,["enter"]),maxlength:"32","show-password":""},null,8,["modelValue","placeholder","onKeypress"])]),_:1},8,["label"]),t("div",{class:"auth-submit-btn",onClick:p},a(e.$t("reset.submit")),1)]),_:1},8,["model","rules"]),t("div",x,[t("a",G,a(e.$t("reset.goSingup")),1)])],64))],64)}}},W=S(J,[["__scopeId","data-v-e5a817f0"]]);export{W as default};
